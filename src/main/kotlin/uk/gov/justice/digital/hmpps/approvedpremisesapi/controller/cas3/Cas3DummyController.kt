package uk.gov.justice.digital.hmpps.approvedpremisesapi.controller.cas3

import io.swagger.v3.oas.annotations.Operation
import org.slf4j.LoggerFactory
import org.springframework.web.bind.annotation.GetMapping
import org.springframework.web.bind.annotation.RequestBody
import org.springframework.web.bind.annotation.RequestMapping
import org.springframework.web.bind.annotation.RestController
import uk.gov.justice.digital.hmpps.approvedpremisesapi.api.model.AllocatedFilter
import uk.gov.justice.digital.hmpps.approvedpremisesapi.api.model.AssessmentSortField
import uk.gov.justice.digital.hmpps.approvedpremisesapi.api.model.BookingSearchSortField
import uk.gov.justice.digital.hmpps.approvedpremisesapi.api.model.Cas3ReportType
import uk.gov.justice.digital.hmpps.approvedpremisesapi.api.model.SortDirection

@RestController
@RequestMapping(path = ["/cas3"])
class Cas3DummyController {
  private val log = LoggerFactory.getLogger(this::class.java)

  @Operation(
    description = "This is a temporary dummy endpoint that adds models missing from autogenerated swagger documentation that are expected by the UI. " +
      "This will be removed once we move away from auto generated controllers",
  )
  @GetMapping(path = ["/dummy"])
  fun test(
    @RequestBody(required = true) request: ClassesToInclude,
  ) {
    // for linting reasons
    log.info("Generating", request.javaClass.classes)
  }
}

// These are needed because the code has been generated as
// Schema = Schema(allowableValues = ["arrived", "awaiting-arrival"]) rather than the actual enum values.
// Therefore, no enum is generated. This can change when we bring the controllers into the project and can use the enums, removing them from here
data class ClassesToInclude(
  val allocatedFilter: AllocatedFilter,
  val sortDirection: SortDirection,
  val bookingSearchSortField: BookingSearchSortField,
  val cas3ReportType: Cas3ReportType,
  val assessmentSortField: AssessmentSortField,
)
