components:
  schemas:
    Cas1PremisesBasicSummary:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          example: Hope House
        apCode:
          type: string
          example: NEHOPE1
        apArea:
          $ref: '_shared.yml#/components/schemas/NamedId'
        bedCount:
          type: integer
          example: 22
        supportsSpaceBookings:
          type: boolean
        fullAddress:
          description: Full address, excluding postcode
          type: string
        postcode:
          type: string
      required:
        - id
        - name
        - apArea
        - bedCount
        - supportsSpaceBookings
        - fullAddress
        - postcode
    Cas1PremisesSearchResultSummary:
      type: object
      properties:
        id:
          type: string
          format: uuid
        apType:
          $ref: '_shared.yml#/components/schemas/ApType'
        name:
          type: string
          example: Hope House
        fullAddress:
          description: Full address, excluding postcode
          type: string
        postcode:
          type: string
          example: LS1 3AD
        apArea:
          $ref: '_shared.yml#/components/schemas/NamedId'
        characteristics:
          type: array
          description: "Room and premise characteristics"
          items:
            $ref: '_shared.yml#/components/schemas/Cas1SpaceCharacteristic'
      required:
        - id
        - apType
        - name
        - apArea
        - characteristics
        - fullAddress
    Cas1Premises:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          example: Hope House
        apCode:
          type: string
          example: NEHOPE1
        fullAddress:
          description: Full address, excluding postcode
          type: string
        postcode:
          type: string
          example: LS1 3AD
        apArea:
          $ref: '_shared.yml#/components/schemas/ApArea'
        bedCount:
          type: integer
          description: The total number of beds in this premises
          example: 22
        availableBeds:
          type: integer
          description: The total number of beds available at this moment in time
          example: 20
        outOfServiceBeds:
          type: integer
          description: The total number of out of service beds at this moment in time
          example: 2
        supportsSpaceBookings:
          type: boolean
        managerDetails:
          type: string
        overbookingSummary:
          description: over-bookings for the next 12 weeks
          type: array
          items:
            $ref: '#/components/schemas/Cas1OverbookingRange'
      required:
        - id
        - name
        - apCode
        - fullAddress
        - postcode
        - apArea
        - bedCount
        - availableBeds
        - outOfServiceBeds
        - supportsSpaceBookings
        - overbookingSummary
    Cas1OverbookingRange:
      type: object
      properties:
        startInclusive:
          type: string
          format: date
          example: 2022-07-28
        endInclusive:
          description: This can be the same as the start date if overbooked for one night
          type: string
          format: date
          example: 2022-07-29
      required:
        - startInclusive
        - endInclusive
    Cas1SpaceBookingCharacteristic:
      type: string
      description: All of the characteristics applicable to a space booking
      enum:
        - hasEnSuite
        - isArsonSuitable
        - isSingle
        - isStepFreeDesignated
        - isSuitedForSexOffenders
        - isWheelchairDesignated
      x-enum-varnames:
        - HAS_EN_SUITE
        - IS_ARSON_SUITABLE
        - IS_SINGLE
        - IS_STEP_FREE_DESIGNATED
        - IS_SUITED_FOR_SEX_OFFENDERS
        - IS_WHEELCHAIR_DESIGNATED
    Cas1NewSpaceBooking:
      type: object
      properties:
        arrivalDate:
          type: string
          format: date
          example: 2022-07-28
        departureDate:
          type: string
          format: date
          example: 2022-09-30
        premisesId:
          type: string
          format: uuid
          example: 290fa58c-77b2-47e2-b729-4cd6b2ed1a78
        requirements:
          deprecated: true
          description: use characteristics
          $ref: '#/components/schemas/Cas1SpaceBookingRequirements'
        characteristics:
          type: array
          items:
            $ref: '_shared.yml#/components/schemas/Cas1SpaceCharacteristic'
      required:
        - arrivalDate
        - departureDate
        - premisesId
    Cas1SpaceBookingRequirements:
      deprecated: true
      description: this is only used by deprecated fields
      type: object
      properties:
        essentialCharacteristics:
          type: array
          items:
            $ref: '_shared.yml#/components/schemas/Cas1SpaceCharacteristic'
      required:
        - essentialCharacteristics
    Cas1UpdateSpaceBooking:
      type: object
      description: Only provide values when a change is required
      properties:
        arrivalDate:
          type: string
          format: date
          example: 2022-07-28
        departureDate:
          type: string
          format: date
          example: 2022-09-30
        characteristics:
          type: array
          items:
            $ref: '#/components/schemas/Cas1SpaceBookingCharacteristic'
    Cas1SpaceSearchRequirements:
      deprecated: true
      type: object
      properties:
        apTypes:
          deprecated: true
          description: "Use 'spaceCharacteristics' to filter on premise types"
          type: array
          items:
            $ref: '_shared.yml#/components/schemas/ApType'
        apType:
          deprecated: true
          description: "Use 'spaceCharacteristics' to filter on premise types"
          $ref: '_shared.yml#/components/schemas/ApType'
        spaceCharacteristics:
          deprecated: true
          description: use Cas1SpaceSearchParameters.spaceCharacteristics
          type: array
          items:
            $ref: '_shared.yml#/components/schemas/Cas1SpaceCharacteristic'
        genders:
          description: gender is obtained from application's associated gender
          deprecated: true
          type: array
          items:
            $ref: '_shared.yml#/components/schemas/Gender'
      required:
        - gender
    Cas1SpaceSearchParameters:
      type: object
      properties:
        applicationId:
          type: string
          format: uuid
          description: The id of the application the space search is for
        startDate:
          type: string
          format: date
          description: The date the space is required from
        durationInDays:
          type: integer
          example: 84
          description: The number of days the space is needed, from the start date
        targetPostcodeDistrict:
          type: string
          description: The 'target' location, in the form of a postcode district
          example: SE5
        requirements:
          deprecated: true
          $ref: '#/components/schemas/Cas1SpaceSearchRequirements'
        spaceCharacteristics:
          type: array
          items:
            $ref: '_shared.yml#/components/schemas/Cas1SpaceCharacteristic'
      required:
        - applicationId
        - startDate
        - durationInDays
        - targetPostcodeDistrict
        - requirements
    Cas1SpaceSearchResults:
      type: object
      properties:
        resultsCount:
          type: integer
          example: 4
        results:
          type: array
          items:
            $ref: '#/components/schemas/Cas1SpaceSearchResult'
      required:
        - resultsCount
        - results
    Cas1SpaceSearchResult:
      type: object
      properties:
        premises:
          $ref: '#/components/schemas/Cas1PremisesSearchResultSummary'
        distanceInMiles:
          type: number
          example: 2.1
      required:
        - premises
        - distanceInMiles
    Cas1SpaceCategory:
      type: string
      example: arson
      description: Spaces are categorised by these traits - 'standard' plus selected physcial and risk characteristics
      enum:
        - standard
        - arson
        - wheelchair
        - sexOffender
        - enSuite
        - single
    Cas1SpaceBooking:
      type: object
      properties:
        id:
          type: string
          format: uuid
        applicationId:
          type: string
          format: uuid
        assessmentId:
          type: string
          format: uuid
        person:
          $ref: '_shared.yml#/components/schemas/Person'
        tier:
          type: string
        premises:
          $ref: '_shared.yml#/components/schemas/NamedId'
        apArea:
          $ref: '_shared.yml#/components/schemas/NamedId'
        bookedBy:
          $ref: '_shared.yml#/components/schemas/User'
        requestForPlacementId:
          deprecated: true
          description: use the better named 'placementRequestId'
          type: string
          format: uuid
        placementRequestId:
          type: string
          format: uuid
        expectedArrivalDate:
          type: string
          format: date
        expectedDepartureDate:
          type: string
          format: date
        actualArrivalDate:
          type: string
          format: date
        actualArrivalDateOnly:
          description: Use actualArrivalDate
          deprecated: true
          type: string
          format: date
        actualArrivalTime:
          description: This value may not be defined even if an arrival date is
          type: string
          pattern: '^([01][0-9]|2[0-3]):([0-5][0-9])$'
          example: '23:15'
        actualDepartureDate:
          type: string
          format: date
        actualDepartureDateOnly:
          description: Use actualDepartureDate
          deprecated: true
          type: string
          format: date
        actualDepartureTime:
          description: This value may not be defined even if a departure date is
          type: string
          pattern: '^([01][0-9]|2[0-3]):([0-5][0-9])$'
          example: '23:15'
        canonicalArrivalDate:
          deprecated: true
          description: actual arrival date or, if not known, the expected arrival date.
          type: string
          format: date
        canonicalDepartureDate:
          deprecated: true
          description: actual departure date or, if not known, the expected departure date
          type: string
          format: date
        departure:
          $ref: '#/components/schemas/Cas1SpaceBookingDeparture'
        createdAt:
          type: string
          format: date-time
        keyWorkerAllocation:
          $ref: '_shared.yml#/components/schemas/Cas1KeyWorkerAllocation'
        otherBookingsInPremisesForCrn:
          type: array
          items:
            $ref: '#/components/schemas/Cas1SpaceBookingDates'
        cancellation:
          $ref: '#/components/schemas/Cas1SpaceBookingCancellation'
        nonArrival:
          $ref: '#/components/schemas/Cas1SpaceBookingNonArrival'
        deliusEventNumber:
          type: string
        status:
          $ref: '_shared.yml#/components/schemas/Cas1SpaceBookingSummaryStatus'
        characteristics:
          type: array
          items:
            $ref: '_shared.yml#/components/schemas/Cas1SpaceCharacteristic'
      required:
        - id
        - applicationId
        - person
        - premises
        - apArea
        - expectedArrivalDate
        - expectedDepartureDate
        - canonicalArrivalDate
        - canonicalDepartureDate
        - createdAt
        - otherBookingsInPremisesForCrn
        - characteristics
    Cas1SpaceBookingDates:
      type: object
      properties:
        id:
          type: string
          format: uuid
        canonicalArrivalDate:
          description: actual arrival date or, if not known, the expected arrival date
          type: string
          format: date
        canonicalDepartureDate:
          description: actual departure date or, if not known, the expected departure date
          type: string
          format: date
      required:
        - id
        - canonicalArrivalDate
        - canonicalDepartureDate
    Cas1SpaceBookingSummarySortField:
      type: string
      enum:
        - personName
        - canonicalArrivalDate
        - canonicalDepartureDate
        - keyWorkerName
        - tier
    Cas1SpaceBookingDaySummarySortField:
      type: string
      enum:
        - personName
        - tier
        - canonicalArrivalDate
        - canonicalDepartureDate
        - releaseType
      x-enum-varnames:
        - PERSON_NAME
        - TIER
        - CANONICAL_ARRIVAL_DATE
        - CANONICAL_DEPARTURE_DATE
        - RELEASE_TYPE
        - SPACE_TYPE
    Cas1PremisesDaySummary:
      type: object
      properties:
        forDate:
          type: string
          format: date
        previousDate:
          type: string
          format: date
        nextDate:
          type: string
          format: date
        capacity:
          $ref: '#/components/schemas/Cas1PremiseCapacityForDay'
        spaceBookings:
          type: array
          items:
            $ref: '#/components/schemas/Cas1SpaceBookingDaySummary'
        outOfServiceBeds:
          type: array
          items:
            $ref: '#/components/schemas/Cas1OutOfServiceBedSummary'
      required:
        - forDate
        - previousDate
        - nextDate
        - capacity
        - spaceBookings
        - outOfServiceBeds
    Cas1SpaceBookingDaySummary:
      type: object
      properties:
        id:
          type: string
          format: uuid
        person:
          $ref: "_shared.yml#/components/schemas/PersonSummary"
        canonicalArrivalDate:
          description: actual arrival date or, if not known, the expected arrival date
          type: string
          format: date
        canonicalDepartureDate:
          description: actual departure date or, if not known, the expected departure date
          type: string
          format: date
        tier:
          description: Risk rating tier level of corresponding application
          type: string
        releaseType:
          type: string
        essentialCharacteristics:
          type: array
          items:
            $ref: '_shared.yml#/components/schemas/Cas1SpaceCharacteristic'
      required:
        - id
        - person
        - canonicalArrivalDate
        - canonicalDepartureDate
        - spaceType
        - essentialCharacteristics
    Cas1SpaceBookingResidency:
      type: string
      enum:
        - upcoming
        - current
        - historic
    Cas1SpaceBookingDeparture:
      type: object
      properties:
        reason:
          $ref: '_shared.yml#/components/schemas/NamedId'
        parentReason:
          $ref: '_shared.yml#/components/schemas/NamedId'
        moveOnCategory:
          $ref: '_shared.yml#/components/schemas/NamedId'
        notes:
          type: string
      required:
        - reason
    Cas1SpaceBookingCancellation:
      type: object
      properties:
        occurredAt:
          type: string
          format: date
        recordedAt:
          type: string
          format: date-time
        reason:
          $ref: '_shared.yml#/components/schemas/CancellationReason'
        reason_notes:
          type: string
      required:
        - occurredAt
        - recordedAt
        - reason
    Cas1SpaceBookingNonArrival:
      type: object
      properties:
        confirmedAt:
          type: string
          format: date-time
        reason:
          $ref: '_shared.yml#/components/schemas/NamedId'
        notes:
          type: string
    Cas1NewArrival:
      type: object
      properties:
        arrivalDateTime:
          description: This is deprecated. Instead use arrivalDate and arrivalTime
          deprecated: true
          type: string
          format: date-time
        arrivalDate:
          type: string
          format: date
        arrivalTime:
          type: string
          pattern: '^([01][0-9]|2[0-3]):([0-5][0-9])$'
          example: '23:15'
    Cas1NonArrival:
      type: object
      properties:
        reason:
          type: string
          format: uuid
        notes:
          type: string
      required:
        - reason
    Cas1NewDeparture:
      type: object
      properties:
        departureDateTime:
          type: string
          format: date-time
        departureDate:
          type: string
          format: date
        departureTime:
          type: string
          pattern: '^([01][0-9]|2[0-3]):([0-5][0-9])$'
          example: '23:15'
        reasonId:
          type: string
          format: uuid
        moveOnCategoryId:
          type: string
          format: uuid
        notes:
          type: string
      required:
        - reasonId
    Cas1AssignKeyWorker:
      type: object
      properties:
        staffCode:
          type: string
      required:
        - staffCode
    Cas1ApprovedPremisesGender:
      type: string
      enum:
        - man
        - woman
    Cas1UpdateUser:
      type: object
      properties:
        roles:
          type: array
          items:
            $ref: '_shared.yml#/components/schemas/ApprovedPremisesUserRole'
        qualifications:
          type: array
          items:
            $ref: '_shared.yml#/components/schemas/UserQualification'
        cruManagementAreaOverrideId:
          type: string
          format: uuid
      required:
        - roles
        - qualifications
    Cas1NewSpaceBookingCancellation:
      type: object
      properties:
        occurredAt:
          type: string
          format: date
        reasonId:
          type: string
          format: uuid
        reasonNotes:
          type: string
      required:
        - occurredAt
        - reasonId
    Cas1PremiseCapacity:
      type: object
      properties:
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        capacity:
          description: Capacity for each day, returning chronologically (oldest first)
          type: array
          items:
            $ref: '#/components/schemas/Cas1PremiseCapacityForDay'
      required:
        - startDate
        - endDate
        - capacity
    Cas1PremiseCapacityForDay:
      type: object
      properties:
        date:
          type: string
          format: date
        totalBedCount:
          description: total bed count including temporarily unavailable beds (e.g. out of service beds). this does not consider bookings.
          type: integer
        availableBedCount:
          description: total bed count excluding temporarily unavailable beds (e.g. out of service beds). this does not consider bookings.
          type: integer
        bookingCount:
          description: total number of bookings in the premise on that day
          type: integer
        characteristicAvailability:
          type: array
          items:
            $ref: '#/components/schemas/Cas1PremiseCharacteristicAvailability'
      required:
        - date
        - totalBedCount
        - availableBedCount
        - bookingCount
        - characteristicAvailability
    Cas1PremiseCharacteristicAvailability:
      type: object
      properties:
        characteristic:
          $ref: '#/components/schemas/Cas1SpaceBookingCharacteristic'
        availableBedsCount:
          description: the number of available beds with this characteristic
          type: integer
        bookingsCount:
          description: the number of bookings requiring this characteristic
          type: integer
      required:
        - characteristic
        - availableBedsCount
        - bookingsCount
    Cas1ReportName:
      type: string
      enum:
        - applications
        - applicationsV2
        - applicationsV2WithPii
        - dailyMetrics
        - outOfServiceBeds
        - placementApplications
        - placementMatchingOutcomes
        - placementMatchingOutcomesV2
        - placementMatchingOutcomesV2WithPii
        - requestsForPlacement
        - requestsForPlacementWithPii
        - placements
        - placementsWithPii
    Cas1BedDetail:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        roomName:
          type: string
        status:
          $ref: '_shared.yml#/components/schemas/BedStatus'
        characteristics:
          type: array
          items:
            $ref: '_shared.yml#/components/schemas/Cas1SpaceCharacteristic'
      required:
        - id
        - name
        - roomName
        - status
        - characteristics
    Cas1OutOfServiceBedSummary:
      type: object
      properties:
        id:
          type: string
          format: uuid
        bedId:
          type: string
          format: uuid
        roomName:
          type: string
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        reason:
          $ref: '#/components/schemas/Cas1OutOfServiceBedReason'
        characteristics:
          type: array
          items:
            $ref: '_shared.yml#/components/schemas/Cas1SpaceCharacteristic'
      required:
        - id
        - bedId
        - startDate
        - endDate
        - reason
        - characteristics
    Cas1OutOfServiceBed:
      type: object
      properties:
        id:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date-time
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        bed:
          $ref: '_shared.yml#/components/schemas/NamedId'
        room:
          $ref: '_shared.yml#/components/schemas/NamedId'
        premises:
          $ref: '_shared.yml#/components/schemas/NamedId'
        apArea:
          $ref: '_shared.yml#/components/schemas/NamedId'
        reason:
          $ref: '#/components/schemas/Cas1OutOfServiceBedReason'
        referenceNumber:
          type: string
        notes:
          type: string
        daysLostCount:
          type: integer
        temporality:
          $ref: '_shared.yml#/components/schemas/Temporality'
        status:
          $ref: '#/components/schemas/Cas1OutOfServiceBedStatus'
        cancellation:
          nullable: true
          allOf:
            - $ref: '#/components/schemas/Cas1OutOfServiceBedCancellation'
        revisionHistory:
          type: array
          items:
            $ref: '#/components/schemas/Cas1OutOfServiceBedRevision'
      required:
        - id
        - createdAt
        - startDate
        - endDate
        - bed
        - room
        - premises
        - apArea
        - reason
        - daysLostCount
        - temporality
        - status
        - revisionHistory
    Cas1NewOutOfServiceBed:
      type: object
      properties:
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        reason:
          type: string
          format: uuid
        referenceNumber:
          type: string
        notes:
          type: string
        bedId:
          type: string
          format: uuid
      required:
        - startDate
        - endDate
        - reason
        - bedId
    UpdateCas1OutOfServiceBed:
      type: object
      properties:
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        reason:
          type: string
          format: uuid
        referenceNumber:
          type: string
        notes:
          type: string
      required:
        - startDate
        - endDate
        - reason
    Cas1OutOfServiceBedCancellation:
      type: object
      properties:
        id:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date-time
        notes:
          type: string
      required:
        - id
        - createdAt
    Cas1NewOutOfServiceBedCancellation:
      type: object
      properties:
        notes:
          type: string
    Cas1OutOfServiceBedStatus:
      type: string
      enum:
        - active
        - cancelled
    Cas1OutOfServiceBedReason:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          example: Double Room with Single Occupancy - Other (Non-FM)
        isActive:
          type: boolean
      required:
        - id
        - name
        - isActive
    Cas1OutOfServiceBedSortField:
      type: string
      enum:
        - premisesName
        - roomName
        - bedName
        - startDate
        - endDate
        - reason
        - daysLost
    Cas1OutOfServiceBedRevision:
      type: object
      properties:
        id:
          type: string
          format: uuid
        updatedAt:
          type: string
          format: date-time
        updatedBy:
          $ref: '_shared.yml#/components/schemas/User'
        revisionType:
          type: array
          items:
            $ref: '#/components/schemas/Cas1OutOfServiceBedRevisionType'
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        reason:
          $ref: '#/components/schemas/Cas1OutOfServiceBedReason'
        referenceNumber:
          type: string
        notes:
          type: string
      required:
        - id
        - updatedAt
        - revisionType
    Cas1OutOfServiceBedRevisionType:
      type: string
      enum:
        - created
        - updatedStartDate
        - updatedEndDate
        - updatedReferenceNumber
        - updatedReason
        - updatedNotes
    Cas1TimelineEvent:
      type: object
      properties:
        type:
          $ref: '#/components/schemas/Cas1TimelineEventType'
        id:
          type: string
        occurredAt:
          type: string
          format: date-time
        content:
          type: string
        createdBy:
          $ref: '_shared.yml#/components/schemas/User'
        payload:
          $ref: '#/components/schemas/Cas1TimelineEventContentPayload'
        associatedUrls:
          type: array
          items:
            $ref: '#/components/schemas/Cas1TimelineEventAssociatedUrl'
        triggerSource:
          type: string
          $ref: '#/components/schemas/Cas1TriggerSourceType'
      required:
        - type
        - id
        - occurredAt
    Cas1TimelineEventAssociatedUrl:
      type: object
      properties:
        type:
          $ref: '#/components/schemas/Cas1TimelineEventUrlType'
        url:
          type: string
      required:
        - type
        - url
    Cas1TimelineEventType:
      type: string
      enum:
        - application_submitted
        - application_assessed
        - booking_made
        - person_arrived
        - person_not_arrived
        - person_departed
        - booking_not_made
        - booking_cancelled
        - booking_changed
        - booking_keyworker_assigned
        - application_withdrawn
        - application_expired
        - information_request
        - assessment_appealed
        - assessment_allocated
        - placement_application_withdrawn
        - placement_application_allocated
        - match_request_withdrawn
        - request_for_placement_created
        - request_for_placement_assessed
        - application_timeline_note
    Cas1TriggerSourceType:
      type: string
      enum:
        - user
        - system
    Cas1TimelineEventUrlType:
      type: string
      enum:
        - application
        - booking
        - assessment
        - assessmentAppeal
        - spaceBooking
    Cas1PersonalTimeline:
      type: object
      properties:
        person:
          $ref: '_shared.yml#/components/schemas/Person'
        applications:
          type: array
          items:
            $ref: '#/components/schemas/Cas1ApplicationTimeline'
      required:
        - person
        - applications
    Cas1ApplicationTimeline:
      type: object
      properties:
        id:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date-time
        isOfflineApplication:
          type: boolean
        status:
          $ref: '#/components/schemas/Cas1ApplicationStatus'
        createdBy:
          $ref: '_shared.yml#/components/schemas/User'
        timelineEvents:
          type: array
          items:
            $ref: '#/components/schemas/Cas1TimelineEvent'
      required:
        - id
        - createdAt
        - isOfflineApplication
        - timelineEvents
    Cas1ApplicationStatus:
      type: string
      enum:
        - started
        - submitted
        - rejected
        - awaitingAssesment
        - unallocatedAssesment
        - assesmentInProgress
        - awaitingPlacement
        - placementAllocated
        - inapplicable
        - withdrawn
        - requestedFurtherInformation
        - pendingPlacementRequest
        - expired
    Cas1TimelineEventContentPayload:
      type: object
      description: "Base schema for all timeline event payloads"
      properties:
        type:
          $ref: '#/components/schemas/Cas1TimelineEventType'
        premises:
          $ref: '_shared.yml#/components/schemas/NamedId'
        schemaVersion:
          type: integer
      required:
        - type
        - premises
        - schemaVersion
      discriminator:
        propertyName: "type"
        mapping:
          booking_changed: '#/components/schemas/Cas1BookingChangedContentPayload'
    Cas1BookingChangedContentPayload:
      type: object
      allOf:
        - $ref: "#/components/schemas/Cas1TimelineEventContentPayload"
      properties:
        expectedArrival:
          type: string
          format: date
        expectedDeparture:
          type: string
          format: date
        previousExpectedArrival:
          description: "Only populated if the new value is different, and where schema version = 2"
          type: string
          format: date
        previousExpectedDeparture:
          description: "Only populated if the new value is different, and where schema version = 2"
          type: string
          format: date
        characteristics:
          type: array
          items:
            $ref: '_shared.yml#/components/schemas/Cas1SpaceCharacteristic'
        previousCharacteristics:
          description: "Only populated if the new value is different, and where schema version = 2"
          type: array
          items:
            $ref: '_shared.yml#/components/schemas/Cas1SpaceCharacteristic'
      required:
        - expectedArrival
        - expectedDeparture
    Cas1PlacementRequestSummary:
      type: object
      properties:
        requestedPlacementDuration:
          type: integer
        requestedPlacementArrivalDate:
          type: string
          format: date
        id:
          type: string
          format: uuid
        person:
          $ref: '_shared.yml#/components/schemas/Person'
        personTier:
          type: string
        applicationId:
          type: string
          format: uuid
        placementRequestStatus:
          type: string
          enum:
            - matched
            - unableToMatch
            - notMatched
        applicationSubmittedDate:
          type: string
          format: date
        isParole:
          type: boolean
        firstBookingPremisesName:
          type: string
        firstBookingArrivalDate:
          type: string
          format: date
      required:
        - placementDatesDuration
        - placementDatesExpectedArrivalDate
        - placementRequestStatus
        - person
        - isParole
        - id
    Cas1NewChangeRequest:
      type: object
      properties:
        spaceBookingId:
          type: string
          format: uuid
        type:
          $ref: '#/components/schemas/Cas1ChangeRequestType'
        requestJson:
          type: object
          additionalProperties:
            $ref: '_shared.yml#/components/schemas/Unit'
        reasonId:
          type: string
          format: uuid
      required:
        - space_booking_id
        - type
        - requestJson
        - reasonId
    Cas1ChangeRequestDecision:
      type: string
      enum:
        - approved
        - rejected
      x-enum-varnames:
        - APPROVED
        - REJECTED
    Cas1ChangeRequestType:
      type: string
      enum:
        - appeal
        - extension
        - plannedTransfer
      x-enum-varnames:
        - APPEAL
        - EXTENSION
        - PLANNED_TRANSFER
    Cas1ChangeRequest:
      type: object
      properties:
        id:
          type: string
          format: uuid
        person:
          $ref: "_shared.yml#/components/schemas/PersonSummary"
        type:
          $ref: '#/components/schemas/Cas1ChangeRequestType'
        createdAt:
          type: string
          format: date-time
        tier:
          type: string
        expectedArrivalDate:
          type: string
          format: date
        actualArrivalDate:
          type: string
          format: date
        lengthOfStayDays:
          type: integer
        requestReason:
          $ref: '_shared.yml#/components/schemas/NamedId'
        decision:
          $ref: '#/components/schemas/Cas1ChangeRequestDecision'
        decisionJson:
          type: object
          additionalProperties:
            $ref: '_shared.yml#/components/schemas/Unit'
        rejectionReason:
          $ref: '_shared.yml#/components/schemas/NamedId'
        updatedAt:
          type: string
          format: date-time
      required:
        - id
        - person
        - type
        - createdAt
        - requestedArrivalDate
        - lengthOfStayDays
        - requestReason
        - updatedAt
    Cas1RejectChangeRequest:
      type: object
      properties:
        rejectionReasonId:
          type: string
          format: uuid
        decisionJson:
          type: object
          additionalProperties:
            $ref: '_shared.yml#/components/schemas/Unit'
      required:
        - rejectionReasonId
        - decisionJson
    Cas1ChangeRequestSummary:
      type: object
      properties:
        id:
          type: string
          format: uuid
        person:
          $ref: "_shared.yml#/components/schemas/PersonSummary"
        type:
          $ref: '#/components/schemas/Cas1ChangeRequestType'
        createdAt:
          type: string
          format: date-time
        tier:
          type: string
        expectedArrivalDate:
          type: string
          format: date
        actualArrivalDate:
          type: string
          format: date
        lengthOfStayDays:
          type: integer
      required:
        - id
        - person
        - type
        - createdAt
        - requestedArrivalDate
        - lengthOfStayDays
    Cas1ChangeRequestSortField:
      type: string
      enum:
        - name
        - tier
        - canonicalArrivalDate
        - lengthOfStay
      x-enum-varnames:
        - NAME
        - TIER
        - CANONICAL_ARRIVAL_DATE
        - LENGTH_OF_STAY
    Cas1PremisesBedSummary:
      type: object
      properties:
        id:
          type: string
          format: uuid
        roomName:
          type: string
        bedName:
          type: string
      required:
        - id
        - roomName
        - bedName
