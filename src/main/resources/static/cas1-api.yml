openapi: 3.0.1
info:
  title: 'Community Accommodation Services: Approved Premises (CAS1)'
  version: 1.0.0
servers:
  - url: /cas1
paths:
  /placement-requests/change-requests:
    get:
      tags:
        - change requests
      operationId: findOpen
      description: Return open change requests
      parameters:
        - name: page
          in: query
          description: Page number of results to return. If blank, returns all results
          schema:
            type: integer
        - name: cruManagementAreaId
          in: query
          description: Limits change requests to applications within the cru management area
          schema:
            type: string
            format: uuid
        - name: sortBy
          in: query
          description: Which field to sort the results by. If blank, will sort by name
          schema:
            $ref: 'cas1-schemas.yml#/components/schemas/Cas1ChangeRequestSortField'
        - name: sortDirection
          in: query
          description: The direction to sort the results by. If blank, will sort in ascending order
          schema:
            $ref: '_shared.yml#/components/schemas/SortDirection'
      responses:
        200:
          description: successfully retrieved change requests
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: 'cas1-schemas.yml#/components/schemas/Cas1ChangeRequestSummary'
          headers:
            X-Pagination-CurrentPage:
              $ref: '_shared.yml#/components/headers/X-Pagination-CurrentPage'
            X-Pagination-TotalPages:
              $ref: '_shared.yml#/components/headers/X-Pagination-TotalPages'
            X-Pagination-TotalResults:
              $ref: '_shared.yml#/components/headers/X-Pagination-TotalResults'
            X-Pagination-PageSize:
              $ref: '_shared.yml#/components/headers/X-Pagination-TotalResults'

  /placement-requests/{placementRequestId}/planned-transfer:
    post:
      tags:
        - change requests
      operationId: createPlannedTransfer
      parameters:
        - name: placementRequestId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1NewChangeRequest'
        required: true
      responses:
        200:
          description: successful operation
        400:
          description: invalid params
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'

  /placement-requests/{placementRequestId}/appeal:
    post:
      tags:
        - change requests
      operationId: createPlacementAppeal
      parameters:
        - name: placementRequestId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1NewChangeRequest'
        required: true
      responses:
        200:
          description: successful operation
        400:
          description: invalid params
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'

  /placement-requests/{placementRequestId}/extension:
    post:
      tags:
        - change requests
      operationId: createPlacementExtension
      parameters:
        - name: placementRequestId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1NewChangeRequest'
        required: true
      responses:
        200:
          description: successful operation
        400:
          description: invalid params
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'

  /placement-requests/{placementRequestId}/change-requests/{changeRequestId}:
    get:
      tags:
        - change requests
      operationId: get
      parameters:
        - name: placementRequestId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: changeRequestId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successfully retrieved change request
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1ChangeRequest'
    patch:
      tags:
        - change requests
      operationId: reject
      parameters:
        - name: placementRequestId
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: changeRequestId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1RejectChangeRequest'
        required: true
      responses:
        200:
          description: successfully rejected a change request



  /spaces/search:
    post:
      tags:
        - space searches
      summary: Search for accommodation "spaces" which are available and match the given requirements
      operationId: spaceSearch
      requestBody:
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1SpaceSearchParameters'
        required: true
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1SpaceSearchResults'
        400:
          description: invalid params
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'

  /placement-requests/{placementRequestId}/space-bookings:
    post:
      tags:
        - space bookings
      summary: Create a booking for a space in premises, associated with a given placement request
      operationId: createSpaceBooking
      parameters:
        - name: placementRequestId
          in: path
          description: ID of the placement request from which the matching requirements originate
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: details of the space booking to be created
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1NewSpaceBooking'
        required: true
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1SpaceBooking'
        400:
          description: invalid params
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'
        404:
          description: invalid premises ID or booking ID
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'
      x-codegen-request-body-name: body
  /placement-applications:
    post:
      deprecated: true
      tags:
        - Placement applications
      summary: Creates an application for a placement
      operationId: placement_applicationsPost
      requestBody:
        description: Details about the application
        content:
          'application/json':
            schema:
              $ref: '_shared.yml#/components/schemas/NewPlacementApplication'
        required: true
      responses:
        200:
          description: successfully recorded that a placement application has been made
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/PlacementApplication'

  /placement-applications/{id}:
    get:
      deprecated: true
      tags:
        - Placement applications
      summary: Retrieves an application for a placement request
      operationId: placement_applicationsIdGet
      parameters:
        - in: path
          name: id
          required: true
          description: Id of the application
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successfully retrieved placement request application
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/PlacementApplication'

    put:
      tags:
        - Placement applications
      summary: Updates an application for a placement request
      operationId: placement_applicationsIdPut
      parameters:
        - in: path
          name: id
          required: true
          description: Id of the application
          schema:
            type: string
            format: uuid
      requestBody:
        description: Details about the application
        content:
          'application/json':
            schema:
              $ref: '_shared.yml#/components/schemas/UpdatePlacementApplication'
        required: true
      responses:
        200:
          description: successfully retrieved placement request application
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/PlacementApplication'

  /placement-applications/{id}/submission:
    post:
      deprecated: true
      tags:
        - Placement applications
      summary: Submits an application for a placement request
      operationId: placement_applicationsIdSubmissionPost
      parameters:
        - in: path
          name: id
          required: true
          description: Id of the application
          schema:
            type: string
            format: uuid
      requestBody:
        description: Information needed to submit a placement application
        content:
          'application/json':
            schema:
              $ref: '_shared.yml#/components/schemas/SubmitPlacementApplication'
        required: true
      responses:
        200:
          description: successfully submitted the placement application
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: '_shared.yml#/components/schemas/PlacementApplication'
        400:
          description: placement application has already been submitted
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'

  /placement-applications/{id}/decision:
    post:
      deprecated: true
      tags:
        - Placement applications
      summary: Submits a decision for a placement application
      operationId: placement_applicationsIdDecisionPost
      parameters:
        - in: path
          name: id
          required: true
          description: Id of the application
          schema:
            type: string
            format: uuid
      requestBody:
        description: Information needed to submit a placement application
        content:
          'application/json':
            schema:
              $ref: '_shared.yml#/components/schemas/PlacementApplicationDecisionEnvelope'
        required: true
      responses:
        200:
          description: successfully made a decision on the placement application
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/PlacementApplication'
        400:
          description: placement application already has a decision made
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'

  /placement-applications/{id}/withdraw:
    post:
      deprecated: true
      tags:
        - Placement applications
      summary: Withdraw a placement application
      operationId: placement_applicationsIdWithdrawPost
      parameters:
        - in: path
          name: id
          required: true
          description: Id of the placement application to withdraw
          schema:
            type: string
            format: uuid
      requestBody:
        description: Withdrawal details
        content:
          'application/json':
            schema:
              $ref: '_shared.yml#/components/schemas/WithdrawPlacementApplication'
      responses:
        200:
          description: Placement application withdrawn
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/PlacementApplication'
        400:
          description: placement application already has a decision made
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'

  /placement-requests:
    get:
      tags:
        - Placement requests
      summary: Gets all placement requests
      operationId: search
      parameters:
        - name: status
          in: query
          description: filter by status of an application
          schema:
            $ref: '_shared.yml#/components/schemas/PlacementRequestStatus'
        - name: crnOrName
          in: query
          description: search by CRN or name
          schema:
            type: string
        - name: tier
          in: query
          description: filter by tier of Offender at time Application was created
          schema:
            $ref: '_shared.yml#/components/schemas/RiskTierLevel'
        - name: arrivalDateStart
          in: query
          description: filter by minimum expected arrival date
          schema:
            type: string
            format: date
        - name: arrivalDateEnd
          in: query
          description: filter by maximum expected arrival date
          schema:
            type: string
            format: date
        - name: requestType
          in: query
          description: filter by request type
          schema:
            $ref: '_shared.yml#/components/schemas/PlacementRequestRequestType'
        - name: cruManagementAreaId
          in: query
          required: false
          description: filter by CRU management area ID
          schema:
            type: string
            format: uuid
        - name: page
          in: query
          description: Page number of results to return. If blank, returns all results
          schema:
            type: integer
        - name: sortBy
          in: query
          description: Which field to sort the results by. If blank, will sort by createdAt
          schema:
            $ref: '_shared.yml#/components/schemas/PlacementRequestSortField'
        - name: sortDirection
          in: query
          description: The direction to sort the results by. If blank, will sort in descending order
          schema:
            $ref: '_shared.yml#/components/schemas/SortDirection'
      responses:
        200:
          description: successfully retrieved placement requests
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: 'cas1-schemas.yml#/components/schemas/Cas1PlacementRequestSummary'
          headers:
            X-Pagination-CurrentPage:
              $ref: '_shared.yml#/components/headers/X-Pagination-CurrentPage'
            X-Pagination-TotalPages:
              $ref: '_shared.yml#/components/headers/X-Pagination-TotalPages'
            X-Pagination-TotalResults:
              $ref: '_shared.yml#/components/headers/X-Pagination-TotalResults'
            X-Pagination-PageSize:
              $ref: '_shared.yml#/components/headers/X-Pagination-TotalResults'
  /placement-requests/{id}:
    get:
      tags:
        - Placement requests
      summary: Gets placement requests for a given user
      operationId: getPlacementRequest
      parameters:
        - name: id
          in: path
          description: ID of the placement request
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successfully retrieved placement requests
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1PlacementRequestDetail'
  /placement-requests/{id}/withdrawal:
    post:
      tags:
        - Placement requests
      summary: Withdraws a placement request
      operationId: withdrawPlacementRequest
      parameters:
        - name: id
          in: path
          description: ID of the placement request
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: Withdrawal details
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1WithdrawPlacementRequest'
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1PlacementRequestDetail'
        404:
          description: invalid applicationId
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'
      x-codegen-request-body-name: body


  /premises/occupancy-report:
    get:
      tags:
        - premises
      summary: Returns a CSV showing premises occupancy for the next 30 days. This does not consider characteristics.
      operationId: getOccupancyReport
      responses:
        200:
          description: Successfully retrieved the report
          content:
            'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':
              schema:
                type: string
                format: binary
  /premises/summary:
    get:
      description: Provide a summary of all premises, with optional filtering
      tags:
        - premises
      operationId: "getPremisesSummaries"
      parameters:
        - name: gender
          in: query
          required: false
          description: If specified, only return premises for the corresponding gender
          schema:
            $ref: 'cas1-schemas.yml#/components/schemas/Cas1ApprovedPremisesGender'
        - name: apAreaId
          in: query
          description: ID of the AP area to filter by
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: 'cas1-schemas.yml#/components/schemas/Cas1PremisesBasicSummary'
        400:
          description: invalid params
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'


  /premises/{premisesId}/out-of-service-beds:
    post:
      tags:
        - out-of-service beds
      summary: Posts an out-of-service bed to a specified approved premises
      operationId: createOutOfServiceBed
      parameters:
        - name: premisesId
          in: path
          description: ID of the premises the out-of-service bed is related to
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: details of the out-of-service bed
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1NewOutOfServiceBed'
        required: true
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1OutOfServiceBed'
        400:
          description: invalid params
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'
        404:
          description: invalid premises ID or booking ID
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'
      x-codegen-request-body-name: body
    get:
      tags:
        - out-of-service beds
      summary: Lists all Out-Of-Service Beds entries for the Premises
      operationId: getOutOfServiceBedsForPremises
      parameters:
        - name: premisesId
          in: path
          description: ID of the premises to show out-of-service beds for
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: 'cas1-schemas.yml#/components/schemas/Cas1OutOfServiceBed'

  /premises/{premisesId}/out-of-service-beds/{outOfServiceBedId}:
    get:
      tags:
        - out-of-service beds
      summary: Returns a specific out-of-service bed for a premises
      operationId: getOutOfServiceBed
      parameters:
        - name: premisesId
          in: path
          description: ID of the premises the out-of-service bed is related to
          required: true
          schema:
            type: string
            format: uuid
        - name: outOfServiceBedId
          in: path
          description: ID of the out-of-service bed
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1OutOfServiceBed'
        404:
          description: invalid premises or out-of-service bed ID
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'
    put:
      tags:
        - out-of-service beds
      summary: Updates an out-of-service bed for a premises
      operationId: updateOutOfServiceBed
      parameters:
        - name: premisesId
          in: path
          description: ID of the premises the out-of-service bed is related to
          required: true
          schema:
            type: string
            format: uuid
        - name: outOfServiceBedId
          in: path
          description: ID of the out-of-service bed
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: details of the out-of-service bed
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/UpdateCas1OutOfServiceBed'
        required: true
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1OutOfServiceBed'
        400:
          description: invalid params
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'
        404:
          description: invalid premises ID or booking ID
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'
      x-codegen-request-body-name: body
  /premises/{premisesId}/out-of-service-beds/{outOfServiceBedId}/cancellations:
    post:
      tags:
        - out-of-service beds
      summary: Posts a cancellation to a specified out-of-service bed
      operationId: cancelOutOfServiceBed
      parameters:
        - name: premisesId
          in: path
          description: ID of the premises the cancellation is related to
          required: true
          schema:
            type: string
            format: uuid
        - name: outOfServiceBedId
          in: path
          description: ID of the out-of-service bed
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: details of the cancellation
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1NewOutOfServiceBedCancellation'
        required: true
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1OutOfServiceBedCancellation'
        400:
          description: invalid params
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'
        404:
          description: invalid premises ID or out-of-service bed ID
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'
      x-codegen-request-body-name: body

  /premises/{premisesId}:
    get:
      tags:
        - premises
      operationId: "getPremisesById"
      summary: Returns premises information
      parameters:
        - name: premisesId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1Premises'
        404:
          description: invalid premises ID
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'
  /premises/{premisesId}/beds:
    get:
      tags:
        - premises
      summary: Lists all beds for the given premises
      operationId: getBeds
      parameters:
        - name: premisesId
          in: path
          description: ID of the premises to list the beds for
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: 'cas1-schemas.yml#/components/schemas/Cas1PremisesBedSummary'

  /premises/{premisesId}/beds/{bedId}:
    get:
      tags:
        - Premises
      summary: Gets a given bed for a given premises
      operationId: getBed
      parameters:
        - name: premisesId
          in: path
          description: ID of the premises that the bed is in
          required: true
          schema:
            type: string
            format: uuid
        - name: bedId
          in: path
          description: ID of the bed to return
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1BedDetail'

  /premises/{premisesId}/capacity:
    get:
      tags:
        - premises
      operationId: "getCapacity"
      summary: Provides capacity information for a given date range
      parameters:
        - name: premisesId
          in: path
          description: ID of the premises
          required: true
          schema:
            type: string
            format: uuid
        - name: startDate
          in: query
          description: Start date, inclusive
          required: true
          schema:
            type: string
            format: date
        - name: endDate
          in: query
          description: End date, inclusive. Should be within 2 years of the startDate. If it exceeds this threshold, capacity information will only be provided for 2 years.
          required: true
          schema:
            type: string
            format: date
        - name: excludeSpaceBookingId
          in: query
          description: ID of a booking to exclude from capacity calculations
          required: false
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1PremiseCapacity'
        400:
          description: invalid params
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'
        404:
          description: invalid premises ID or booking ID
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'
      x-codegen-request-body-name: body

  /premises/{premisesId}/staff:
    get:
      tags:
        - Premises
      summary: Returns the staff that work at an approved premises
      operationId: getStaff
      parameters:
        - name: premisesId
          in: path
          description: ID of the premises to return staff for
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: '_shared.yml#/components/schemas/StaffMember'
        404:
          description: invalid premises ID
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'

  /premises/{premisesId}/space-bookings:
    get:
      tags:
        - space bookings
      summary: Lists space bookings for the premises, given optional filtering criteria
      operationId: getSpaceBookings
      parameters:
        - name: premisesId
          in: path
          description: ID of the premises to show space bookings for
          required: true
          schema:
            type: string
            format: uuid
        - name: residency
          in: query
          required: false
          description: Residency status to filter results on. 'Current' means marked as arrived and not departed. 'Upcoming' means not marked as arrived.
          schema:
            $ref: 'cas1-schemas.yml#/components/schemas/Cas1SpaceBookingResidency'
        - name: crnOrName
          in: query
          required: false
          description: Partial search on CRN or Name
          schema:
            type: string
        - name: keyWorkerStaffCode
          in: query
          required: false
          description: Staff Code of the key worker to show bookings for
          schema:
            type: string
        - name: sortDirection
          in: query
          required: false
          description: The direction to sort the results by. If not defined, will sort in descending order
          schema:
            $ref: '_shared.yml#/components/schemas/SortDirection'
        - name: sortBy
          in: query
          required: false
          description: The field to sort the results by. If not defined, will sort on person name
          schema:
            $ref: 'cas1-schemas.yml#/components/schemas/Cas1SpaceBookingSummarySortField'
        - name: page
          in: query
          required: false
          description: Page number of results to return. If not provided results will not be paged
          schema:
            type: integer
        - name: perPage
          in: query
          description: Number of items to return per page (defaults to 20)
          schema:
            type: integer
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: '_shared.yml#/components/schemas/Cas1SpaceBookingSummary'
          headers:
            X-Pagination-CurrentPage:
              $ref: '_shared.yml#/components/headers/X-Pagination-CurrentPage'
            X-Pagination-TotalPages:
              $ref: '_shared.yml#/components/headers/X-Pagination-TotalPages'
            X-Pagination-TotalResults:
              $ref: '_shared.yml#/components/headers/X-Pagination-TotalResults'
            X-Pagination-PageSize:
              $ref: '_shared.yml#/components/headers/X-Pagination-PageSize'


  /premises/{premisesId}/space-bookings/{bookingId}:
    get:
      tags:
        - space bookings
      operationId: "getSpaceBookingByPremiseAndId"
      summary: Returns space booking information for a given id
      parameters:
        - name: premisesId
          in: path
          description: ID of the corresponding premises
          required: true
          schema:
            type: string
            format: uuid
        - name: bookingId
          in: path
          description: ID of the space booking
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1SpaceBooking'

    patch:
      tags:
        - space bookings
      operationId: "updateSpaceBooking"
      parameters:
        - name: premisesId
          in: path
          description: ID of the corresponding premises
          required: true
          schema:
            type: string
            format: uuid
        - name: bookingId
          in: path
          description: ID of the space booking
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1UpdateSpaceBooking'
        required: true
      responses:
        200:
          description: successful operation

  /premises/{premisesId}/space-bookings/{bookingId}/shorten:
    patch:
      tags:
        - space bookings
      operationId: "shortenSpaceBooking"
      parameters:
        - name: premisesId
          in: path
          description: ID of the corresponding premises
          required: true
          schema:
            type: string
            format: uuid
        - name: bookingId
          in: path
          description: ID of the space booking
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1ShortenSpaceBooking'
        required: true
      responses:
        200:
          description: successful operation

  /premises/{premisesId}/space-bookings/{bookingId}/timeline:
    get:
      tags:
        - space bookings
      operationId: "getSpaceBookingTimeline"
      summary: Returns timeline of a specific space booking with a given ID
      parameters:
        - name: premisesId
          in: path
          description: ID of the corresponding premises
          required: true
          schema:
            type: string
            format: uuid
        - name: bookingId
          in: path
          description: ID of the space booking
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: 'cas1-schemas.yml#/components/schemas/Cas1TimelineEvent'


  /premises/{premisesId}/space-bookings/{bookingId}/arrival:
    post:
      tags:
      - space bookings
      summary: Posts an arrival to a specified space booking
      operationId: recordArrival
      parameters:
        - name: premisesId
          in: path
          description: ID of the corresponding premises
          required: true
          schema:
            type: string
            format: uuid
        - name: bookingId
          in: path
          description: ID of the space booking
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1NewArrival'
        required: true
      responses:
        200:
          description: successful operation
        400:
          description: invalid params
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'
        404:
          description: invalid premises ID or booking ID
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'


  /premises/{premisesId}/space-bookings/{bookingId}/keyworker:
    post:
      tags:
        - space bookings
      summary: Assign a keyworker to the space booking
      operationId: assignKeyworker
      parameters:
        - name: premisesId
          in: path
          description: ID of the corresponding premises
          required: true
          schema:
            type: string
            format: uuid
        - name: bookingId
          in: path
          description: ID of the space booking
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1AssignKeyWorker'
        required: true
      responses:
        200:
          description: successful operation
        400:
          description: invalid key worker staff code
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'
        404:
          description: invalid premises ID or booking ID
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'

  /premises/{premisesId}/space-bookings/{bookingId}/departure:
    post:
      tags:
        - space bookings
      summary: Posts a departure to a specified space booking
      operationId: recordDeparture
      parameters:
        - name: premisesId
          in: path
          description: ID of the corresponding premises
          required: true
          schema:
            type: string
            format: uuid
        - name: bookingId
          in: path
          description: ID of the space booking
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1NewDeparture'
        required: true
      responses:
        200:
          description: successful operation
        400:
          description: invalid params
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'
        404:
          description: invalid premises ID or booking ID
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'

  /premises/{premisesId}/space-bookings/{bookingId}/cancellations:
    post:
      tags:
        - space bookings
      summary: Cancels a space booking
      operationId: "cancelSpaceBooking"
      parameters:
        - name: premisesId
          in: path
          description: ID of the premises the space booking is related to
          required: true
          schema:
            type: string
            format: uuid
        - name: bookingId
          in: path
          description: space booking id
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: details of the cancellation
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1NewSpaceBookingCancellation'
        required: true
      responses:
        200:
          description: successful operation
        400:
          description: invalid params
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'
        404:
          description: invalid premises ID or booking ID
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'
      x-codegen-request-body-name: body


  /premises/{premisesId}/space-bookings/{bookingId}/non-arrival:
    post:
      tags:
        - space bookings
      summary: Posts a non arrival to a specified space booking
      operationId: recordNonArrival
      parameters:
        - name: premisesId
          in: path
          description: ID of the corresponding premises
          required: true
          schema:
            type: string
            format: uuid
        - name: bookingId
          in: path
          description: ID of the space booking
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1NonArrival'
        required: true
      responses:
        200:
          description: successful operation
        400:
          description: invalid params
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'
        404:
          description: invalid premises ID or booking ID
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'

  /premises/{premisesId}/space-bookings/{bookingId}/emergency-transfer:
    post:
      tags:
        - space bookings
      summary: Creates a space booking without a change request and truncates the departure date of the existing space booking
      operationId: emergencyTransfer
      parameters:
        - name: premisesId
          in: path
          description: ID of the corresponding premises
          required: true
          schema:
            type: string
            format: uuid
        - name: bookingId
          in: path
          description: ID of the space booking
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1NewEmergencyTransfer'
        required: true
      responses:
        200:
          description: successful operation
        400:
          description: invalid params
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'
        404:
          description: invalid premises ID or booking ID
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'

  /premises/{premisesId}/space-bookings/{bookingId}/planned-transfer:
    post:
      tags:
        - space bookings
      summary: Creates a space booking for a planned transfer change request and truncates the departure date of the existing space booking. Will close the planned transfer change request.
      operationId: plannedTransfer
      parameters:
        - name: premisesId
          in: path
          description: ID of the corresponding premises
          required: true
          schema:
            type: string
            format: uuid
        - name: bookingId
          in: path
          description: ID of the space booking
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1NewPlannedTransfer'
        required: true
      responses:
        200:
          description: successful operation
        400:
          description: invalid params
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'
        404:
          description: invalid premises ID or booking ID
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'

  /premises/{premisesId}/space-bookings/{bookingId}/appeal:
    post:
      tags:
        - space bookings
      summary: Cancels a space booking and approves the appeal change request
      operationId: "appeal"
      parameters:
        - name: premisesId
          in: path
          description: ID of the premises the space booking is related to
          required: true
          schema:
            type: string
            format: uuid
        - name: bookingId
          in: path
          description: space booking id
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        description: details of the cancellation
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1ApprovedPlacementAppeal'
        required: true
      responses:
        200:
          description: successful operation
        400:
          description: invalid params
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'
        404:
          description: invalid premises ID or booking ID
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'
      x-codegen-request-body-name: body

  /premises/{premisesId}/day-summary/{date}:
    get:
      tags:
        - premises
      summary: Provides a summary of capacity, space bookings and out of service beds for a premise on a given day
      operationId: getDaySummary
      parameters:
        - name: premisesId
          in: path
          description: ID of the premises
          required: true
          schema:
            type: string
            format: uuid
        - name: date
          in: path
          description: date the summary is required for
          required: true
          schema:
            type: string
            format: date
        - name: bookingsCriteriaFilter
          in: query
          required: false
          description: If provided, will only show bookings with matching criteria
          schema:
            type: array
            items:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1SpaceBookingCharacteristic'
        - name: bookingsSortDirection
          in: query
          required: false
          description: The direction to sort the bookings by. If not defined, will sort in descending order
          schema:
            $ref: '_shared.yml#/components/schemas/SortDirection'
        - name: bookingsSortBy
          in: query
          required: false
          description: The field to sort the booking by. If not defined, will sort on person name
          schema:
            $ref: 'cas1-schemas.yml#/components/schemas/Cas1SpaceBookingDaySummarySortField'
        - name: excludeSpaceBookingId
          in: query
          description: ID of a booking to exclude from capacity calculations and the list of space bookings
          required: false
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1PremisesDaySummary'
          headers:
            X-Pagination-CurrentPage:
              $ref: '_shared.yml#/components/headers/X-Pagination-CurrentPage'
            X-Pagination-TotalPages:
              $ref: '_shared.yml#/components/headers/X-Pagination-TotalPages'
            X-Pagination-TotalResults:
              $ref: '_shared.yml#/components/headers/X-Pagination-TotalResults'
            X-Pagination-PageSize:
              $ref: '_shared.yml#/components/headers/X-Pagination-PageSize'

  /reference-data/change-request-reasons/{changeRequestType}:
    get:
      tags:
        - Reference Data
      operationId: getChangeRequestReasons
      parameters:
        - name: changeRequestType
          in: path
          required: true
          schema:
            $ref: 'cas1-schemas.yml#/components/schemas/Cas1ChangeRequestType'
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: '_shared.yml#/components/schemas/NamedId'

  /reference-data/change-request-rejection-reasons/{changeRequestType}:
    get:
      tags:
        - Reference Data
      operationId: getChangeRequestRejectionReasons
      parameters:
        - name: changeRequestType
          in: path
          required: true
          schema:
            $ref: 'cas1-schemas.yml#/components/schemas/Cas1ChangeRequestType'
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: '_shared.yml#/components/schemas/NamedId'

  /reference-data/move-on-categories:
    get:
      tags:
        - Reference Data
      operationId: getMoveOnCategories
      summary: Lists all active move-on categories
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: '_shared.yml#/components/schemas/MoveOnCategory'

  /reference-data/non-arrival-reasons:
    get:
      tags:
        - Reference Data
      operationId: getNonArrivalReasons
      summary: Lists all active non-arrivals reasons
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: '_shared.yml#/components/schemas/NonArrivalReason'

  /reference-data/out-of-service-bed-reasons:
    get:
      tags:
        - Reference Data
      operationId: getOutOfServiceBedReasons
      summary: Lists all reasons for beds going out of service
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: 'cas1-schemas.yml#/components/schemas/Cas1OutOfServiceBedReason'


  /reference-data/cru-management-areas:
    get:
      tags:
        - Reference Data
      operationId: getCruManagementAreas
      summary: Lists all CRU Management Areas
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: '_shared.yml#/components/schemas/Cas1CruManagementArea'


  /reference-data/departure-reasons:
    get:
      tags:
        - Reference Data
      operationId: getDepartureReasons
      summary: Lists all active departure reasons
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: '_shared.yml#/components/schemas/DepartureReason'


  /reports/{reportName}:
    get:
      tags:
        - Reports
      summary: Returns a spreadsheet of all data metrics for the 'reportName'.
      operationId: getReportByName
      parameters:
        - name: X-Service-Name
          in: header
          required: true
          description: Validates user for this service has access to the report
          schema:
            $ref: '_shared.yml#/components/schemas/ServiceName'
        - name: reportName
          in: path
          description: Name of the report to download
          required: true
          schema:
            $ref: 'cas1-schemas.yml#/components/schemas/Cas1ReportName'
        - name: year
          in: query
          required: false
          description: The report content will reflect that specified by the given year.
          schema:
            type: integer
        - name: month
          in: query
          required: false
          description: The report content will reflect that specified by the given month.
          schema:
            type: integer
        - name: startDate
          in: query
          description: Start date, inclusive
          required: false
          schema:
            type: string
            format: date
        - name: endDate
          in: query
          description: End date, inclusive
          required: false
          schema:
            type: string
            format: date
      responses:
        200:
          description: Successfully retrieved the report
          content:
            'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':
              schema:
                type: string
                format: binary


  /space-bookings/{bookingId}:
    get:
      tags:
        - space bookings
      operationId: "getSpaceBookingById"
      summary: Returns space booking information for a given id
      parameters:
        - name: bookingId
          in: path
          description: ID of the space booking
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1SpaceBooking'


  /out-of-service-beds:
    get:
      tags:
        - out-of-service beds
      summary: Lists all Out-Of-Service Beds entries
      operationId: getOutOfServiceBeds
      parameters:
        - name: temporality
          in: query
          description: If provided, restrict the results to only those with the given temporality/ies.
          schema:
            type: array
            items:
              $ref: '_shared.yml#/components/schemas/Temporality'
        - name: premisesId
          in: query
          description: If provided, restrict the results to only those in the premises with the given ID.
          schema:
            type: string
            format: uuid
        - name: apAreaId
          in: query
          description: If provided, restrict the results to only those within the AP area with the given ID.
          schema:
            type: string
            format: uuid
        - name: sortDirection
          in: query
          description: The direction to sort the results by. If blank, will sort in descending order
          schema:
            $ref: '_shared.yml#/components/schemas/SortDirection'
        - name: sortBy
          in: query
          description: The field to sort the results by.
          schema:
            $ref: 'cas1-schemas.yml#/components/schemas/Cas1OutOfServiceBedSortField'
        - name: page
          in: query
          required: false
          description: Page number of results to return. If not provided results will not be paged
          schema:
            type: integer
        - name: perPage
          in: query
          description: Number of items to return per page (defaults to 10)
          schema:
            type: integer
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: 'cas1-schemas.yml#/components/schemas/Cas1OutOfServiceBed'
          headers:
            X-Pagination-CurrentPage:
              $ref: '_shared.yml#/components/headers/X-Pagination-CurrentPage'
            X-Pagination-TotalPages:
              $ref: '_shared.yml#/components/headers/X-Pagination-TotalPages'
            X-Pagination-TotalResults:
              $ref: '_shared.yml#/components/headers/X-Pagination-TotalResults'
            X-Pagination-PageSize:
              $ref: '_shared.yml#/components/headers/X-Pagination-PageSize'

  /users/{id}:
    get:
      summary: Get information about a specific user
      operationId: getUser
      tags:
        - users
      parameters:
        - in: path
          name: id
          required: true
          description: Id of the user
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successfully retrieved information on user
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/ApprovedPremisesUser'

    put:
      summary: Update a user
      operationId: updateUser
      tags:
        - users
      parameters:
        - in: path
          name: id
          required: true
          description: Id of the user
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1UpdateUser'
        required: true
      responses:
        200:
          description: Successfully added information about user roles and qualifications
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/User'

    delete:
      summary: Deletes the user
      operationId: deleteUser
      tags:
        - users
      parameters:
        - name: id
          in: path
          description: ID of the user
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
        400:
          description: invalid params
          content:
            'application/problem+json':
              schema:
                $ref: '_shared.yml#/components/schemas/ValidationError'

  /applications/{applicationId}/timeline:
    get:
      tags:
        - Applications
      summary: Returns domain event summary
      operationId: getApplicationTimeLine
      parameters:
        - name: applicationId
          in: path
          description: ID of the application
          required: true
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: 'cas1-schemas.yml#/components/schemas/Cas1TimelineEvent'
        404:
          description: invalid CRN
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'
  /applications/all:
    get:
      tags:
        - Applications
      summary: Lists all applications that any user has created
      operationId: getAllApplications
      parameters:
        - name: page
          in: query
          description: Page number of results to return. If blank, returns all results
          schema:
            type: integer
        - name: crnOrName
          in: query
          description: CRN of applications
          schema:
            type: string
        - name: sortDirection
          in: query
          description: The direction to sort the results by. If blank, will sort in descending order
          schema:
            $ref: '_shared.yml#/components/schemas/SortDirection'
        - name: status
          in: query
          description: Application statuses to filter on. If none provided, all will be returned
          schema:
            type: array
            items:
              $ref: '_shared.yml#/components/schemas/ApprovedPremisesApplicationStatus'
        - name: sortBy
          in: query
          description: The field to sort the results by.
          schema:
            $ref: '_shared.yml#/components/schemas/ApplicationSortField'
        - name: apAreaId
          in: query
          required: false
          description: Approved Premises Area ID to filter results by
          schema:
            type: string
            format: uuid
        - name: releaseType
          in: query
          required: false
          description: If provided, restricts the results to only those with the given release type.
          schema:
            $ref: '_shared.yml#/components/schemas/ReleaseTypeOption'
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: 'cas1-schemas.yml#/components/schemas/Cas1ApplicationSummary'
          headers:
            X-Pagination-CurrentPage:
              $ref: '_shared.yml#/components/headers/X-Pagination-CurrentPage'
            X-Pagination-TotalPages:
              $ref: '_shared.yml#/components/headers/X-Pagination-TotalPages'
            X-Pagination-TotalResults:
              $ref: '_shared.yml#/components/headers/X-Pagination-TotalResults'
            X-Pagination-PageSize:
              $ref: '_shared.yml#/components/headers/X-Pagination-TotalResults'

  /applications:
    get:
      tags:
        - Applications
      summary: Lists all applications that the user has created
      operationId: getApplicationsForUser
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: 'cas1-schemas.yml#/components/schemas/Cas1ApplicationSummary'

  /people/{crn}/oasys/answers:
    get:
      tags:
        - OAsys
      summary: Returns OASys answers for the requested group. The Supporting Information answers are returned if linked to harm and optionally if their section number appears in the selected-sections query parameter.
      operationId: answers
      parameters:
        - name: crn
          in: path
          description: CRN of the Person to fetch latest OASys selection
          required: true
          schema:
            type: string
        - name: group
          in: query
          description: The section answers are required for
          required: true
          schema:
            $ref: 'cas1-schemas.yml#/components/schemas/Cas1OASysGroupName'
        - name: includeOptionalSections
          in: query
          description: Should only be provided if the 'group' parameter is 'needs'. Defines which sections answers should be taken from. This is only required for answers that are optional, as indicated by the response from /people/{crn}/oasys/optional-needs-questions
          required: false
          schema:
            type: array
            items:
              type: integer
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1OASysGroup'
        404:
          description: invalid CRN
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'

  /people/{crn}/oasys/supporting-information-metadata:
    get:
      tags:
        - OAsys
      summary: Returns metadata about supporting information questions for a given CRN
      operationId: supportingInformationMetadata
      parameters:
        - name: crn
          in: path
          required: true
          schema:
            type: string
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: 'cas1-schemas.yml#/components/schemas/Cas1OASysSupportingInformationMetaData'
        404:
          description: invalid CRN
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'
  /people/{crn}/timeline:
    get:
      tags:
        - People
      summary: Returns a timeline of all applications for a Person.
      operationId: getPeopleApplicationsTimeline
      parameters:
        - name: crn
          in: path
          description: CRN of the Person to fetch the timeline for
          required: true
          schema:
            type: string
      responses:
        200:
          description: successful operation
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1PersonalTimeline'
        404:
          description: invalid CRN
          content:
            'application/json':
              schema:
                $ref: '_shared.yml#/components/schemas/Problem'
  /assessments:
    get:
      tags:
        - Assessments
      summary: Gets assessments the user is authorised to view
      operationId: getAssessmentsForUser
      parameters:
        - name: sortDirection
          in: query
          description: If provided, return results in the given order
          required: false
          schema:
            $ref: "_shared.yml#/components/schemas/SortDirection"
        - name: sortBy
          in: query
          description: If provided, return results ordered by the given field name
          required: false
          schema:
            $ref: "cas1-schemas.yml#/components/schemas/Cas1AssessmentSortField"
        - name: statuses
          in: query
          description: If provided, return only results with the given statuses
          required: false
          schema:
            type: array
            items:
              $ref: "cas1-schemas.yml#/components/schemas/Cas1AssessmentStatus"
        - name: crnOrName
          in: query
          description: Filters results using an exact match or CRN, or partial match on name
          required: false
          schema:
            type: string
        - name: page
          in: query
          description: Page number of results to return. If blank, returns all results
          schema:
            type: integer
        - name: perPage
          in: query
          description: Number of items to return per page (defaults to 10)
          schema:
            type: integer
      responses:
        200:
          description: successfully retrieved assessments
          content:
            'application/json':
              schema:
                type: array
                items:
                  $ref: 'cas1-schemas.yml#/components/schemas/Cas1AssessmentSummary'
          headers:
            X-Pagination-CurrentPage:
              schema:
                type: integer
              description: The current page number
            X-Pagination-TotalPages:
              schema:
                type: integer
              description: The total number of pages
            X-Pagination-TotalResults:
              schema:
                type: integer
              description: The total number of results
            X-Pagination-PageSize:
              schema:
                type: integer
              description: The size of each page

  /assessments/{assessmentId}:
    get:
      tags:
        - Assessments
      summary: Gets a single assessment by its id
      operationId: getAssessment
      parameters:
        - in: path
          name: assessmentId
          required: true
          description: Id of the assessment
          schema:
            type: string
            format: uuid
      responses:
        200:
          description: successfully retrieved assessment
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1Assessment'

    put:
      tags:
        - Assessments
      summary: Updates an assessment
      operationId: updateAssessment
      parameters:
        - in: path
          name: assessmentId
          required: true
          description: Id of the assessment
          schema:
            type: string
            format: uuid
      requestBody:
        description: Updated assessment
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1UpdateAssessment'
        required: true
      responses:
        200:
          description: successfully updated assessment
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1Assessment'

  /assessments/{assessmentId}/notes:
    post:
      tags:
        - Assessments
      summary: Adds a clarification note to an assessment
      operationId: addClarificationNoteToAssessment
      parameters:
        - in: path
          name: assessmentId
          required: true
          description: Id of the assessment
          schema:
            type: string
            format: uuid
      requestBody:
        description: Clarification note
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1NewClarificationNote'
        required: true
      responses:
        201:
          description: successfully created a clarification note
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1ClarificationNote'

  /assessments/{assessmentId}/notes/{noteId}:
    put:
      tags:
        - Assessments
      summary: Updates an assessment's clarification note
      operationId: updateAssessmentClarificationNote
      parameters:
        - in: path
          name: assessmentId
          required: true
          description: Id of the assessment
          schema:
            type: string
            format: uuid
        - in: path
          name: noteId
          required: true
          description: Id of the clarification note
          schema:
            type: string
            format: uuid
      requestBody:
        description: Clarification note
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1UpdatedClarificationNote'
        required: true
      responses:
        201:
          description: successfully updated a clarification note
          content:
            'application/json':
              schema:
                $ref: 'cas1-schemas.yml#/components/schemas/Cas1ClarificationNote'

  /assessments/{assessmentId}/acceptance:
    post:
      tags:
        - Assessments
      summary: Accepts an Assessment
      operationId: acceptAssessment
      parameters:
        - in: path
          name: assessmentId
          required: true
          description: Id of the assessment
          schema:
            type: string
            format: uuid
      requestBody:
        description: Information needed to accept an assessment
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1AssessmentAcceptance'
        required: true
      responses:
        200:
          description: successfully accepted the assessment

  /assessments/{assessmentId}/rejection:
    post:
      tags:
        - Assessments
      summary: Rejects an Assessment
      operationId: rejectAssessment
      parameters:
        - in: path
          name: assessmentId
          required: true
          description: Id of the assessment
          schema:
            type: string
            format: uuid
      requestBody:
        description: Rejection info
        content:
          'application/json':
            schema:
              $ref: 'cas1-schemas.yml#/components/schemas/Cas1AssessmentRejection'
        required: true
      responses:
        200:
          description: successfully rejected the assessment




